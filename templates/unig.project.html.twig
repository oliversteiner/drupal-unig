{#
/**
 * @file
 *
 */
#}

{#
project
 - year
 - date
 - year
 - timestamp
 - title
 - body
 - weight (draggable)
 - number_of_items
 - album_list
     - title
     - nid
 - links
   - edit
   - delete
 - cover_id     (node_id from unig_file)
 - cover_image  (render with twig)
    -format

 #}

{{ attach_library('unig/unig.admin.images') }}

<h1>Project</h1>

{% set unig_projects     = path('unig.project.list') %}
{% set unig_upload = path('unig.upload') %}

<div id="ajax-container">
    ajax-container
</div>

<div class="unig-debug">
{#
    {{ dd(files) }}
#}

</div>


<div class="unig-toolbar">

    <a type="button" class="button btn btn-default" href="{{ unig_projects }}">
        <i class="fa fa-list" aria-hidden="true"></i>
        Alle Projekte
    </a>

    <a type="button" class="button btn btn-default" href="{{ unig_upload }}">
        <i class="fa fa-plus" aria-hidden="true"></i>
        Neues Projekt
    </a>


</div>

<div class="unig-ajax-container">

</div>


<article>
    <div>{{ project.nid }}</div>
    <div>{{ project.title }}</div>

    {# Anzahl Bilder #}
    <div>
        {% if project.number_of_items == 1 %}
            {{ project.number_of_items }} Bild
        {% elseif project.number_of_items > 1 %}
            {{ project.number_of_items }} Bilder
        {% endif %}
    </div>

    <div>{{ project.body }}</div>
    <div> {{ project.date|date("m/d/Y") }}</div>

    <div>
        {#
                    <img src="{{ project.cover_image.thumbnail }}" alt="">
        #}
    </div>

    {# Album List #}
    <div>
        <ul>
            <li>
                <a href="/unig/project/{{ project.nid }}">Alle</a>
            </li>

            {% for album in project.album_list %}
                <li>
                    <a href="/unig/project/{{ project.nid }}/{{ album.nid }}">{{ album.title }}</a>
                </li>

            {% endfor %}
        </ul>
    </div>

</article>

{# Album List #}
<div>
    <ul>
        {% for file in files %}
            <li>
                <img src="{{ file.image.thumbnail }}" alt="">

                <div>

                    <a class="unig-file-set-cover use-ajax" href="/unig/ajaxtest/{{ file.nid }}" >Als Titelbild festlegen</a>

                    <p>Zu album hinzuf√ºgen</p>
                    <ul>
                        {% for album in project.album_list %}
                        <li>
                            <a href="/unig/project/{{ project.nid }}/{{ album.nid }}">{{ album.title }}</a>
                        </li>

                    {% endfor %}
                    </ul>
                </div>
            </li>

        {% endfor %}
    </ul>
</div>


<hr>